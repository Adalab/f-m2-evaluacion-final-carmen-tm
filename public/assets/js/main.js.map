{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["/* eslint-disable no-console */\n'use strict';\n\n//Get elements\nconst inputEl = document.querySelector('.app-input');\nconst btnEl = document.querySelector('.btn');\n\nconst resultListEl = document.querySelector('.results__list');\nconst favouritesListEl = document.querySelector('.favourites__list');\n\nconst myFavShowsArr = [];\n\nfunction createItem(a, b) {\n  //Create li elements\n  const newItemEl = document.createElement('li');\n  newItemEl.classList.add('show-card');\n\n  //Create content node\n  const contentItemImgEl = document.createElement('img');\n  contentItemImgEl.setAttribute('src', b);\n  contentItemImgEl.setAttribute('alt', a);\n\n  const contentItemTitleEl = document.createElement('h3');\n  const contentItemTitleText = document.createTextNode(a);\n  contentItemTitleEl.appendChild(contentItemTitleText);\n\n  newItemEl.appendChild(contentItemImgEl);\n  newItemEl.appendChild(contentItemTitleEl);\n  //   console.log(newItemEl);\n\n  return newItemEl;\n}\n\nfunction paintResults(array, list) {\n  for (const element of array) {\n    const arrNames = element.show.name;\n    let arrUrls = '';\n\n    if (!element.show.image) {\n      arrUrls = `https://via.placeholder.com/210x295/f4eded/9b1414/?text=${arrNames}`;\n    } else {\n      arrUrls = element.show.image.medium;\n    }\n\n    const itemsFilled = createItem(arrNames, arrUrls);\n\n    list.appendChild(itemsFilled);\n  }\n}\n\nfunction createFavItem(a) {\n  //Make a copy of the li element as favourite\n  const favItemCloned = a.cloneNode(true);\n  favItemCloned.classList.add('preview--favourite');\n  const title = favItemCloned.innerText;\n\n  //Create an id matching its title\n  favItemCloned.setAttribute('id', title);\n  console.log('favItemCloned', favItemCloned);\n\n  //Create btn reset\n  const resetBtnEl = document.createElement('button');\n  resetBtnEl.classList.add('reset-btn');\n  const resetBtnContent = document.createTextNode('x');\n  resetBtnEl.appendChild(resetBtnContent);\n  resetBtnEl.setAttribute('data--id', title);\n\n  favItemCloned.appendChild(resetBtnEl);\n\n  return favItemCloned;\n}\n\nfunction paintResultsReduced(array, list) {\n  list.appendChild(array);\n}\n\nfunction selectFavourite(a) {\n  //Include favourite items in an array\n  //NOT WORKING. IF NOT FAVOURITE (NOT HAVING THAT CLASS), IT SHOULD REMOVE IT FROM THE ARRAY\n  if (a.classList.contains('show-card--favourite')) {\n    myFavShowsArr.push(a);\n    console.log('myFavShowsArr', myFavShowsArr);\n    //   } else {\n    //     delete myFavShowsArr[a];\n    //     console.log('myFavShowsArr', myFavShowsArr);\n  }\n}\n\nfunction handlerResetBtnClick(event) {\n  const resetBtnClicked = event.currentTarget;\n  const resetBtnClickedData = resetBtnClicked.getAttribute('data--id');\n  console.log('click', resetBtnClickedData);\n  // console.dir(resetBtnClicked);\n\n  // const itemForRemove = getElementById(resetBtnClickedData);\n  const itemForRemove = resetBtnClicked.parentNode;\n  console.log(itemForRemove);\n\n  favouritesListEl.removeChild(itemForRemove);\n\n  //To remove the item from my array of favourites I need to find its index\n  for (const element of myFavShowsArr) {\n    const titleFav = element.innerText;\n    const idFavRemove = itemForRemove.getAttribute('id');\n    if (titleFav === idFavRemove) {\n      console.log('quiero borrar este item');\n\n      const myIndex = myFavShowsArr.indexOf(element);\n      console.log(myIndex);\n      //The method splice() remove one element knowing it index. The inputs are the index point to start at and the number of elements to remove.\n      myFavShowsArr.splice(myIndex, 1);\n      console.log(myFavShowsArr);\n\n      ///MISSING JUST REMOVING THE FAV CLASS ON THE LIST OF RESULTS!!!\n    }\n  }\n  // console.log(itemForRemove);\n  // console.log(myFavShowsArr);\n  // console.log(myIndex);\n}\n\nfunction handlerCardsClick(event) {\n  const selectedCard = event.currentTarget;\n  //   console.log('selecting one card', selectedCard);\n\n  //Add a special class for favourites\n  selectedCard.classList.add('show-card--favourite');\n\n  selectFavourite(selectedCard);\n\n  //Copy items\n  const favItems = createFavItem(selectedCard);\n\n  //Paint favourite results on its list\n  paintResultsReduced(favItems, favouritesListEl);\n\n  const resetArrayBtnEl = document.querySelectorAll('.reset-btn');\n  // console.log(resetArrayBtnEl);\n\n  //Add listener to each reset butoton\n  for (const button of resetArrayBtnEl) {\n    button.addEventListener('click', handlerResetBtnClick);\n  }\n}\n\n//Handler for main button\nfunction handlerBtnSearch() {\n  //Save user input value\n  const userValue = inputEl.value;\n  //   console.log(userValue);\n  //Connect to API\n  fetch(`http://api.tvmaze.com/search/shows?q=${userValue}`)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(responseParsed) {\n      return responseParsed;\n    })\n    .then(function(data) {\n      //The response is an array of objects\n      const arrShows = data;\n      //   console.log('arrShows', arrShows);\n\n      //Reset results\n      resultListEl.innerHTML = '';\n      //Paint results\n      paintResults(arrShows, resultListEl);\n\n      //Add listener to each card from the results\n      const resultsCardEl = document.querySelectorAll('.show-card');\n      for (const card of resultsCardEl) {\n        card.addEventListener('click', handlerCardsClick);\n      }\n    });\n}\n\n//Add lister to main button\nbtnEl.addEventListener('click', handlerBtnSearch);\n\n//initial info: array of favourites\nconst fakeArray = document.querySelectorAll('.fake-item');\nconsole.log(fakeArray);\n\nconst favArrObjects = [];\nconst myObject = {};\n\nfor (let i = 0; i < fakeArray.length; i++) {\n  const favImgEl = fakeArray[i].firstElementChild;\n  const favImgUrl = favImgEl.src;\n\n  const favTitleEl = fakeArray[i].lastElementChild;\n  const favTitleText = favTitleEl.innerHTML;\n\n  myObject.url = favImgUrl;\n  myObject.title = favTitleText;\n  // console.log(myObject);\n\n  favArrObjects.push(myObject);\n}\n\n//I have an array of objects to be store in LS\nconsole.log(favArrObjects);\n\n//Store our array in LS\nfunction storeInLS(a, b) {\n  localStorage.setItem(a, JSON.stringify(b));\n}\nstoreInLS('favArrObjects', favArrObjects);\n\n//Retrieve info from LS\nfunction refreshPage() {\n  //Check if LS has something\n  const infoSavedInLS = JSON.parse(localStorage.getItem('favArrObjects'));\n\n  if (infoSavedInLS) {\n    console.log('caché has something', infoSavedInLS);\n\n    for (const object of infoSavedInLS) {\n      const myUrl = object.url;\n      const myTitle = object.title;\n      console.log(myUrl, myTitle);\n    }\n  } else {\n    console.log('caché is empty');\n  }\n}\nrefreshPage();\n"]}