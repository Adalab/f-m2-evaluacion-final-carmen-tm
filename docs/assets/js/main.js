"use strict";const inputEl=document.querySelector(".app-input"),btnEl=document.querySelector(".btn"),resultListEl=document.querySelector(".results__list"),favouritesListEl=document.querySelector(".favourites__list"),myFavShowsArr=[];function createItem(e,t){const n=document.createElement("li");n.classList.add("show-card");const o=document.createElement("img");o.setAttribute("src",t),o.setAttribute("alt",e);const s=document.createElement("h3"),r=document.createTextNode(e);return s.appendChild(r),n.appendChild(o),n.appendChild(s),n}function paintResults(e,t){for(const n of e){const e=n.show.name;let o="";const s=createItem(e,o=n.show.image?n.show.image.medium:`https://via.placeholder.com/210x295/f4eded/9b1414/?text=${e}`);t.appendChild(s)}}function createFavItem(e){const t=e.cloneNode(!0);t.classList.add("preview--favourite");const n=t.innerText;t.setAttribute("id",n),console.log("favItemCloned",t);const o=document.createElement("button");o.classList.add("reset-btn");const s=document.createTextNode("x");return o.appendChild(s),o.setAttribute("data--id",n),t.appendChild(o),t}function paintResultsReduced(e,t){t.appendChild(e)}function selectFavourite(e){e.classList.contains("show-card--favourite")&&(myFavShowsArr.push(e),console.log("myFavShowsArr",myFavShowsArr))}function handlerResetBtnClick(e){const t=e.currentTarget,n=t.getAttribute("data--id");console.log("click",n);const o=t.parentNode;console.log(o),favouritesListEl.removeChild(o);for(const e of myFavShowsArr){if(e.innerText===o.getAttribute("id")){console.log("quiero borrar este item");const t=myFavShowsArr.indexOf(e);console.log(t),myFavShowsArr.splice(t,1),console.log(myFavShowsArr)}}}function handlerCardsClick(e){const t=e.currentTarget;t.classList.add("show-card--favourite"),selectFavourite(t),paintResultsReduced(createFavItem(t),favouritesListEl);const n=document.querySelectorAll(".reset-btn");for(const e of n)e.addEventListener("click",handlerResetBtnClick)}function handlerBtnSearch(){const e=inputEl.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){const t=e;resultListEl.innerHTML="",paintResults(t,resultListEl);const n=document.querySelectorAll(".show-card");for(const e of n)e.addEventListener("click",handlerCardsClick)})}btnEl.addEventListener("click",handlerBtnSearch);